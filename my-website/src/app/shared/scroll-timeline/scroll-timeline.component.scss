/* 
  Scroll Timeline Stile
  Vertikaler Fortschrittsindikator mit animierten Knotenpunkten
  Positioniert unten links im Viewport
*/

/* BEM Block: timeline */
.timeline {
    position: fixed;
    /* Positionierung: unten links */
    left: calc(50% - 720px + 80px);
    /* bottom wird dynamisch via [style.bottom.px] gesetzt */
    top: auto;
    transform: none;
    z-index: 50;
    display: flex;
    align-items: stretch;
    height: 200px;
    transition: bottom 100ms ease-out;
    /* Sanfte Animation beim Verschieben */

    /* Verstecken auf kleineren Bildschirmen */
    @media (max-width: 1440px) {
        left: 80px;
    }

    @media (max-width: 1200px) {
        left: 40px;
    }

    @media (max-width: 768px) {
        display: none;
    }
}

/* Versteckt die Timeline wenn Footer sichtbar ist */
.timeline--hidden {
    opacity: 0;
    pointer-events: none;
    transition: opacity var(--transition-normal);
}

/* BEM Element: timeline__track */
.timeline__track {
    position: relative;
    width: 2px;
    height: 100%;
    margin-right: 0;
}

/* BEM Element: timeline__line (Hintergrund) */
.timeline__line {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: var(--color-muted);
    opacity: 0.3;
}

/* BEM Element: timeline__progress (Aktive Linie) */
.timeline__progress {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    background: linear-gradient(180deg,
            var(--color-primary) 0%,
            var(--color-primary-light) 100%);
    box-shadow:
        0 0 8px rgba(145, 30, 33, 0.5),
        0 0 16px rgba(145, 30, 33, 0.3);
    transition: height 100ms ease-out;
}

/* BEM Element: timeline__nodes */
.timeline__nodes {
    position: absolute;
    top: 0;
    left: -5px;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

/* BEM Element: timeline__node */
.timeline__node {
    position: relative;
    width: 12px;
    height: 12px;
    padding: 0;
    border: none;
    background: transparent;
    cursor: pointer;

    &:focus {
        outline: none;
    }

    &:focus-visible .timeline__dot {
        outline: 2px solid var(--color-primary-light);
        outline-offset: 2px;
    }
}

/* BEM Element: timeline__dot */
.timeline__dot {
    display: block;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    /* Solider Hintergrund damit die Linie nicht durchscheint */
    background: var(--color-bg);
    border: 2px solid var(--color-muted);
    transition:
        background var(--transition-normal),
        border-color var(--transition-normal),
        transform var(--transition-normal),
        box-shadow var(--transition-normal);
}

/* BEM Modifier: timeline__node--active */
.timeline__node--active .timeline__dot {
    background: linear-gradient(135deg,
            var(--color-primary) 0%,
            var(--color-primary-light) 100%);
    border-color: var(--color-primary);
    transform: scale(1.2);

    /* Pulsierender Glow-Effekt */
    animation: node-pulse 2s ease-in-out infinite;
}

/* BEM Modifier: timeline__node--past */
.timeline__node--past .timeline__dot {
    /* Solider grauer Hintergrund - Linie nicht sichtbar */
    background: var(--color-muted);
    border-color: var(--color-muted);
}

/* Animation f√ºr aktiven Knoten */
@keyframes node-pulse {

    0%,
    100% {
        box-shadow:
            0 0 8px rgba(145, 30, 33, 0.5),
            0 0 16px rgba(145, 30, 33, 0.3);
    }

    50% {
        box-shadow:
            0 0 12px rgba(145, 30, 33, 0.7),
            0 0 24px rgba(145, 30, 33, 0.5);
    }
}